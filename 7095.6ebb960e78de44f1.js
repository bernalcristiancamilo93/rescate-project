"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7095],{7095:(J,M,m)=>{m.r(M),m.d(M,{DigitalModulationPageModule:()=>N});var T=m(9808),n=m(4182),l=m(9250),v=m(2292),P=m(9301),e=m(2096);function U(a,u){if(1&a&&(e.TgZ(0,"ion-select-option",19),e._uU(1),e.qZA()),2&a){const t=u.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function k(a,u){if(1&a&&(e.TgZ(0,"ion-select-option",19),e._uU(1),e.qZA()),2&a){const t=u.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}const w=function(){return["/","home"]},S=[{path:"",component:(()=>{class a{constructor(t){this.alertCtrl=t,this.modulationTypes=[{label:"1024 QAM",value:"1024qam",numBits:10},{label:"256 QAM",value:"256qam",numBits:8},{label:"64 QAM",value:"64qam",numBits:6},{label:"16 QAM",value:"16qam",numBits:4}],this.timeUnits=[{label:"Seconds (s)",value:1,text:"s"},{label:"Miliseconds (ms)",value:1e3,text:"ms"},{label:"Microseconds (us)",value:1e6,text:"us"},{label:"Nanoseconds (ns)",value:1e9,text:"ns"}]}ngOnInit(){this.modulationForm=new n.cw({modulationType:new n.NI(null,n.kI.required),bitFrame:new n.NI(null,n.kI.required),symbolRate:new n.NI(9600,[n.kI.required,n.kI.min(1)]),amplitude:new n.NI(1.161,[n.kI.required,n.kI.min(1)]),timeUnit:new n.NI(1e3,n.kI.required),numraRandSymbols:new n.NI(4,[n.kI.required,n.kI.min(1)]),carrierFreq:new n.NI(19200,[n.kI.required,n.kI.min(1)])})}calculate(){const t=this.bitsPerSymbol(),o=this.formatInput(this.getRawMessage(),this.bitsPerSymbol()),i=[];for(const r of o){const p=r.slice(0,r.length/2),b=r.slice(r.length/2,r.length+1);i.push([p,b])}const s=this.modulationForm.get("amplitude").value*Math.SQRT1_2/(Math.pow(2,t/2)-1),g=[],h=[],d=Math.pow(2,t/2);for(let r=0;r<d;r++)g.push(s*(d-(1+2*r))),h.push(s*(1+2*r-d));const B=this.modulationForm.get("timeUnit").value/this.modulationForm.get("symbolRate").value,y=this.modulationForm.get("carrierFreq").value,Z=y/this.modulationForm.get("symbolRate").value*100,q=this.linspace(0,B,Z,!1),_=[],C=[];for(let r=0;r<Z;r++)_.push(Math.sin(2*Math.PI*y*(q[r]/this.modulationForm.get("timeUnit").value))),C.push(Math.sin(2*Math.PI*y*(q[r]/this.modulationForm.get("timeUnit").value)+Math.PI/2));const I=[];for(const r of i){const p=g[parseInt(r[0].join(""),2)],b=h[parseInt(r[1].join(""),2)];I.push([p,b])}const A=[];for(const r of I){const p=C.map(f=>f*r[0]),b=_.map(f=>f*r[1]);A.push(p.map((f,R)=>f+b[R]))}let F=[];for(const r of A)F=F.concat(r);this.createSineWaveChart(F)}formatInput(t,o){const i=t.split(""),c=[];for(let s=0;s<i.length;s+=o)c.push(i.slice(s,s+o));return c}linspace(t,o,i,c=!0){const g=(o-t)/(c?i-1:i);return Array.from({length:i},(h,d)=>t+g*d)}checkIfBinary(){const t=this.getRawMessage();if(t)for(const o of t)"0"!==o&&"1"!==o&&this.alertCtrl.create({header:"Invalid Character on Message!",message:"Your message will be errased!",buttons:["Okay"]}).then(i=>{i.present(),i.onWillDismiss().then(()=>this.modulationForm.get("bitFrame").patchValue(null))})}checkIfCorrect(){const t=this.getRawMessage(),o=this.bitsPerSymbol();!t||t.length%o!=0&&this.alertCtrl.create({header:"Invalid bit amount on Message!",message:`Your message must contain at least ${o} bits or a\n            multiple of it. Your message will be errased!`,buttons:["Okay"]}).then(i=>{i.present(),i.onWillDismiss().then(()=>this.modulationForm.get("bitFrame").patchValue(null))})}getRawMessage(){return this.modulationForm.get("bitFrame").value}bitsPerSymbol(){return this.modulationTypes.find(({value:t})=>t===this.modulationForm.get("modulationType").value).numBits}generateRandomBitFrame(){const t=this.modulationForm.get("numraRandSymbols").value,o=[];for(let i=0;i<t*this.bitsPerSymbol();i++)o.push(Math.round(Math.random()));this.modulationForm.get("bitFrame").patchValue(o.toString().replace(/,/g,""))}checkFreq(){const t=this.modulationForm.get("symbolRate").value,o=this.modulationForm.get("carrierFreq").value;!o||o<2*t&&this.alertCtrl.create({header:"Invalid carrier frequency!",message:"The carrier frequency must be al least twice the baud rate.\n           Your message will be errased!",buttons:["Okay"]}).then(i=>{i.present(),i.onWillDismiss().then(()=>this.modulationForm.get("carrierFreq").patchValue(null))})}createSineWaveChart(t){this.sineWaveChart&&this.sineWaveChart.destroy(),t.push(t.slice(-1)[0]);const o=this.modulationForm.get("bitFrame").value.length/this.bitsPerSymbol(),i=this.modulationForm.get("timeUnit").value/this.modulationForm.get("symbolRate").value*o,s=this.modulationForm.get("carrierFreq").value/this.modulationForm.get("symbolRate").value*100*o+1,h={labels:this.linspace(0,i,s,!0),datasets:[{label:"Modulated Signal",data:t,fill:!1,pointRadius:0,borderColor:"#3880ff",backgroundColor:"#4c8dff"}]};this.sineWaveChart=new P.kL("sineWaveChart",{type:"line",data:h,options:{responsive:!0,interaction:{intersect:!1,axis:"x"},scales:{x:{title:{display:!0,text:`Time (${this.timeUnits.find(({value:d})=>d===this.modulationForm.get("timeUnit").value).text})`}},y:{title:{display:!0,text:"Amplitude (V)"}}}}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.Br))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-digital-modulation"]],decls:66,vars:10,consts:[["slot","end"],["slot","icon-only",3,"routerLink"],["name","home-outline"],[3,"formGroup"],["position","floating"],["placeholder","Select modulation scheme","formControlName","modulationType",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","symbolRate","placeholder","Enter a value",3,"ionBlur"],["type","number","formControlName","amplitude"],["type","number","formControlName","carrierFreq","placeholder","Enter a value",3,"disabled","ionBlur"],["placeholder","Select a time unit","formControlName","timeUnit"],["formControlName","bitFrame","placeholder","Type your message","autoGrow","true","rows","1",3,"disabled","ionChange","ionBlur"],[1,"ion-align-items-center"],["fill","outline",3,"disabled","click"],["type","number","formControlName","numraRandSymbols","placeholder","Enter a value"],[3,"disabled","click"],["size","10","offset","1"],[1,"chart-container"],["id","sineWaveChart"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e._UZ(4,"ion-icon",2),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Digital Modulation"),e.qZA()()(),e.TgZ(7,"ion-content")(8,"ion-grid")(9,"form",3)(10,"ion-row")(11,"ion-col")(12,"ion-list")(13,"ion-item")(14,"ion-label",4),e._uU(15," Modulation type "),e.qZA(),e.TgZ(16,"ion-select",5),e.NdJ("ionChange",function(){return o.checkIfCorrect()}),e.YNc(17,U,2,2,"ion-select-option",6),e.qZA()(),e.TgZ(18,"ion-item")(19,"ion-label",4),e._uU(20," Symbol transmission rate (Bd) "),e.qZA(),e.TgZ(21,"ion-input",7),e.NdJ("ionBlur",function(){return o.checkFreq()}),e.qZA()(),e.TgZ(22,"ion-item")(23,"ion-label",4),e._uU(24," Modulated signal maximum amplitude (V) "),e.qZA(),e._UZ(25,"ion-input",8),e.qZA(),e.TgZ(26,"ion-item")(27,"ion-label",4),e._uU(28," Carrier frequency (Hz) "),e.qZA(),e.TgZ(29,"ion-input",9),e.NdJ("ionBlur",function(){return o.checkFreq()}),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label",4),e._uU(32," Plotting Time Unit "),e.qZA(),e.TgZ(33,"ion-select",10),e.YNc(34,k,2,2,"ion-select-option",6),e.qZA()()()(),e.TgZ(35,"ion-col")(36,"ion-row")(37,"ion-col")(38,"ion-item")(39,"ion-label",4),e._uU(40," Bit frame "),e.qZA(),e.TgZ(41,"ion-textarea",11),e.NdJ("ionChange",function(){return o.checkIfBinary()})("ionBlur",function(){return o.checkIfCorrect()}),e.qZA()()()(),e.TgZ(42,"ion-row",12)(43,"ion-col")(44,"ion-button",13),e.NdJ("click",function(){return o.generateRandomBitFrame()}),e._uU(45," Generate random symbol "),e.qZA()(),e.TgZ(46,"ion-col")(47,"ion-item")(48,"ion-label",4),e._uU(49," Number of random symbols "),e.qZA(),e._UZ(50,"ion-input",14),e.qZA()()()()(),e.TgZ(51,"ion-row")(52,"ion-col")(53,"ion-button",15),e.NdJ("click",function(){return o.calculate()}),e._uU(54," Calculate "),e.qZA()()(),e.TgZ(55,"ion-row")(56,"ion-col",16)(57,"div",17)(58,"canvas",18),e._uU(59),e.qZA()()()(),e.TgZ(60,"ion-row"),e._UZ(61,"ion-col")(62,"ion-col"),e.qZA(),e.TgZ(63,"ion-row"),e._UZ(64,"ion-col")(65,"ion-col"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(9,w)),e.xp6(6),e.Q6J("formGroup",o.modulationForm),e.xp6(8),e.Q6J("ngForOf",o.modulationTypes),e.xp6(12),e.Q6J("disabled",!o.modulationForm.get("symbolRate").valid),e.xp6(5),e.Q6J("ngForOf",o.timeUnits),e.xp6(7),e.Q6J("disabled",!o.modulationForm.get("modulationType").valid),e.xp6(3),e.Q6J("disabled",!o.modulationForm.get("numraRandSymbols").valid||!o.modulationForm.get("modulationType").valid),e.xp6(9),e.Q6J("disabled",!o.modulationForm.valid),e.xp6(6),e.Oqu(o.sineWaveChart))},dependencies:[T.sg,n._Y,n.JJ,n.JL,l.YG,l.Sm,l.wI,l.W2,l.jY,l.Gu,l.gu,l.pK,l.Ie,l.Q$,l.q_,l.Nd,l.t9,l.n0,l.g2,l.wd,l.sr,l.as,l.QI,l.j9,l.YI,v.rH,n.sg,n.u]}),a})()}];let D=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[v.Bz.forChild(S),v.Bz]}),a})(),N=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[T.ez,n.u5,l.Pc,D,n.UX]}),a})()}}]);